# Building a Web Search Agent for Financial Research - Demo

### Intro

Financial data like credit card offers and rewards rates change constantly, making static datasets quickly obsolete. This demo solves that problem by building a multi-tool AI agent that can perform real-time financial research. The agent searches the web for current information, validates its sources, extracts structured data from text using an LLM, and synthesizes a professional, user-friendly comparison.

### Walkthrough & Code

This walkthrough demonstrates how to build a web search agent that automates financial research. We will use the Tavily API to get fresh data from the web and an LLM to process and structure it.

First, we set up the environment by initializing the OpenAI client and ensuring our API keys for both OpenAI and Tavily are configured. The Tavily API is a search service specifically designed for LLMs.

To manage the flow of information, we define several data models using Python's `dataclasses`. This helps ensure our data is structured consistently throughout the agent's workflow.
- `SearchResult`: Represents a single result from the web search API.
- `CreditCardRecord`: A structured format for the details of a single credit card.
- `CardComparison`: The final object that holds the complete, synthesized comparison for the user.

Next, we build the `CreditCardSearchAgent` class, which orchestrates several tools to perform the research. The agent's first step is to define a list of trusted financial sources to ensure the credibility of the information it gathers.

The agent's main method, `find_best_rewards_cards`, coordinates a multi-step pipeline:
1.  **Search:** It uses the `search_web` method to query the Tavily API with several variations of the user's query to get a broad set of results.
2.  **Filter:** It passes the results to `filter_reputable_sources` to keep only the information from our predefined trusted domains.
3.  **Extract:** It uses the `extract_card_data` method, which leverages an LLM to parse unstructured text snippets and convert them into structured `CreditCardRecord` objects.
4.  **Deduplicate:** The `deduplicate_cards` method removes duplicate entries for the same credit card.
5.  **Synthesize:** Finally, the `synthesize_comparison` method uses an LLM to generate a user-friendly summary, takeaway, and intro based on the extracted data.

Now, let's test the complete agent workflow. We initialize the agent and provide a typical user query. The output shows the agent executing each step of its pipeline, from searching the web to generating the final comparison.

Finally, we format the `CardComparison` object generated by the agent into a clean, readable Markdown format for the end-user. The final output is a professional and easy-to-read summary that directly answers the user's query using real-time, validated data from the web.

> This demo illustrates how to build a robust, multi-tool AI agent that can autonomously perform web research, data extraction, and synthesis for complex domains like financial analysis.